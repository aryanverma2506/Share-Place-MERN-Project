"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[741],{3741:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var c=t(4165),r=t(5861),a=t(9439),s=t(2791),o=t(7689),i=t(8042),l=t(9106),u=t(5483),d=t.n(u),h="Map_map__ccaPJ",p="Map_map-menu__3vaNN",m=t(184);d().accessToken="pk.eyJ1IjoibGl2ZWNvdW50MjUwNiIsImEiOiJjbGhibjBmNHEwc3plM2tuc25sZHkyeWh3In0.lcEFrhZ0a7poGDSZ3NgWow";var f=function(e){var n=(0,s.useRef)(null),t=(0,s.useState)("outdoors-v12"),c=(0,a.Z)(t,2),r=c[0],o=c[1],i=e.title,l=e.center,u=e.zoom;return(0,s.useEffect)((function(){if(n.current){var e=new(d().Map)({container:n.current,style:"mapbox://styles/mapbox/".concat(r),center:l,zoom:u}),t=(new(d().Marker)).setLngLat(l).addTo(e),c=(new(d().Popup)).setHTML(i);t.setPopup(c)}}),[r,i,l,u]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"".concat(h," ").concat(e.className),style:e.style,ref:n}),(0,m.jsxs)("select",{className:"".concat(p),defaultValue:"outdoors-v12",onChange:function(e){o((function(){return e.target.value}))},children:[(0,m.jsx)("option",{value:"satellite-streets-v12",children:"Satellite Streets"}),(0,m.jsx)("option",{value:"light-v11",children:"Light"}),(0,m.jsx)("option",{value:"dark-v11",children:"Dark"}),(0,m.jsx)("option",{value:"streets-v12",children:"Streets"}),(0,m.jsx)("option",{value:"outdoors-v12",children:"Outdoors"})]})]})},x=t(4231),j=t(7009),v=t(8898),_=t(8249),Z=t(509),g="PlaceItem_place-item__087ND",N="PlaceItem_place-item__content__LHjaM",I="PlaceItem_place-item__info__qcDkc",C="PlaceItem_place-item__image__eQV-G",k="PlaceItem_place-item__actions__TF8Yu",E="PlaceItem_place-item__modal-content__MhPtm",P="PlaceItem_place-item__modal-actions__qLNQh",y="PlaceItem_map-container__x9OeO";var w=function(e){var n=(0,s.useState)(!1),t=(0,a.Z)(n,2),o=t[0],u=t[1],d=(0,s.useState)(!1),h=(0,a.Z)(d,2),p=h[0],w=h[1],L=(0,Z.x)(),D=L.error,b=L.isLoading,M=L.sendRequest,O=L.clearError,S=(0,s.useContext)(_.V);function T(){u((function(){return!1}))}function F(){w((function(){return!1}))}function V(){return(V=(0,r.Z)((0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return w((function(){return!1})),n.prev=1,n.next=4,M({url:"".concat("https://share-place-mern-project-server.onrender.com/api","/places/").concat(e.id),method:"DELETE",headers:{Authorization:"Bearer "+S.token}});case 4:e.onDelete(e.id),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))).apply(this,arguments)}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.Z,{error:D,onClear:O}),(0,m.jsx)(x.Z,{show:o,onCancel:T,header:e.address,footer:(0,m.jsx)(l.Z,{onClick:T,children:"CLOSE"}),contentClass:"".concat(E),footerClass:"".concat(P),children:(0,m.jsx)("div",{className:"".concat(y),children:(0,m.jsx)(f,{title:e.title,center:e.coordinates,zoom:15})})}),S.userId===e.creatorId&&(0,m.jsx)(x.Z,{show:p,onCancel:F,header:"Are you sure?",footerClass:"".concat(P),footer:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{inverse:!0,onClick:F,children:"CANCEL"}),(0,m.jsx)(l.Z,{danger:!0,onClick:function(){return V.apply(this,arguments)},children:"DELETE"})]}),children:(0,m.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),(0,m.jsx)("li",{className:"".concat(g),children:(0,m.jsxs)(i.Z,{className:"".concat(N),children:[b&&(0,m.jsx)(v.Z,{asOverlay:!0}),(0,m.jsx)("div",{className:"".concat(C),children:(0,m.jsx)("img",{src:"".concat("https://share-place-mern-project-server.onrender.com","/").concat(e.image),alt:e.title})}),(0,m.jsxs)("div",{className:"".concat(I),children:[(0,m.jsx)("h2",{children:e.title}),(0,m.jsx)("h3",{children:e.address}),(0,m.jsx)("p",{children:e.description})]}),(0,m.jsxs)("div",{className:"".concat(k),children:[(0,m.jsx)(l.Z,{inverse:!0,onClick:function(){u((function(){return!0}))},children:"VIEW ON MAP"}),S.userId===e.creatorId&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{to:"/places/".concat(e.id),children:"EDIT"}),(0,m.jsx)(l.Z,{danger:!0,onClick:function(){w((function(){return!0}))},children:"DELETE"})]})]})]})})]})},L="PlaceList_place-list__+iZzH";var D=function(e){var n=(0,s.useContext)(_.V),t=(0,o.UO)().userId;return 0===e.places.length?(0,m.jsx)("div",{className:"".concat(L," center"),children:n.isLoggedIn&&n.userId===t?(0,m.jsxs)(i.Z,{children:[(0,m.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,m.jsx)(l.Z,{to:"/places/new",children:"Share Place"})]}):(0,m.jsx)(i.Z,{children:(0,m.jsx)("h2",{children:"No places found."})})}):(0,m.jsx)("ul",{className:"".concat(L),children:e.places.map((function(n){return(0,m.jsx)(w,{id:n.id,title:n.title,image:n.image,address:n.address,creatorId:n.creator,coordinates:n.location,description:n.description,onDelete:e.onDeletePlace},n.id)}))})};var b=function(){var e=(0,o.UO)().userId,n=(0,Z.x)(),t=n.error,i=n.isLoading,l=n.sendRequest,u=n.clearError,d=(0,s.useState)([]),h=(0,a.Z)(d,2),p=h[0],f=h[1];return(0,s.useEffect)((function(){function n(){return(n=(0,r.Z)((0,c.Z)().mark((function n(){var t;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l({url:"".concat("https://share-place-mern-project-server.onrender.com/api","/places//user/").concat(e)});case 3:t=n.sent,f((function(){return t.places})),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),"Could not find a places for the provided user id."===n.t0.message?f((function(){return[]})):f((function(){})),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e,l]),(0,m.jsxs)(m.Fragment,{children:[!p&&(0,m.jsx)(j.Z,{error:t,onClear:u}),i&&(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(v.Z,{asOverlay:!0})}),!i&&p&&(0,m.jsx)(D,{places:p,onDeletePlace:function(e){f((function(n){return null===n||void 0===n?void 0:n.filter((function(n){return n.id!==e}))}))}})]})}},8042:function(e,n,t){t.d(n,{Z:function(){return a}});t(2791);var c="Card_card__1-V8Z",r=t(184);var a=function(e){return(0,r.jsx)("div",{className:"".concat(c," ").concat(e.className),style:e.style,children:e.children})}}}]);
//# sourceMappingURL=741.6fb65709.chunk.js.map