"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[741],{3741:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var c=n(4165),r=n(5861),a=n(9439),s=n(2791),o=n(7689),i=n(8042),l=n(9106),u=n(5483),d=n.n(u),h="Map_map__ccaPJ",p="Map_map-menu__3vaNN",f=n(184);d().accessToken="pk.eyJ1IjoibGl2ZWNvdW50MjUwNiIsImEiOiJjbGhibjBmNHEwc3plM2tuc25sZHkyeWh3In0.lcEFrhZ0a7poGDSZ3NgWow";var x=function(e){var t=(0,s.useRef)(null),n=(0,s.useState)("outdoors-v12"),c=(0,a.Z)(n,2),r=c[0],o=c[1],i=e.title,l=e.center,u=e.zoom;return(0,s.useEffect)((function(){if(t.current){var e=new(d().Map)({container:t.current,style:"mapbox://styles/mapbox/".concat(r),center:l,zoom:u}),n=(new(d().Marker)).setLngLat(l).addTo(e),c=(new(d().Popup)).setHTML(i);n.setPopup(c)}}),[r,i,l,u]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{className:"".concat(h," ").concat(e.className),style:e.style,ref:t}),(0,f.jsxs)("select",{className:"".concat(p),defaultValue:"outdoors-v12",onChange:function(e){o((function(){return e.target.value}))},children:[(0,f.jsx)("option",{value:"satellite-streets-v12",children:"Satellite Streets"}),(0,f.jsx)("option",{value:"light-v11",children:"Light"}),(0,f.jsx)("option",{value:"dark-v11",children:"Dark"}),(0,f.jsx)("option",{value:"streets-v12",children:"Streets"}),(0,f.jsx)("option",{value:"outdoors-v12",children:"Outdoors"})]})]})},m=n(4231),j=n(7009),v=n(8898),_=n(8249),Z=n(509),g="PlaceItem_place-item__087ND",N="PlaceItem_place-item__content__LHjaM",I="PlaceItem_place-item__info__qcDkc",C="PlaceItem_place-item__image__eQV-G",k="PlaceItem_place-item__actions__TF8Yu",E="PlaceItem_place-item__modal-content__MhPtm",P="PlaceItem_place-item__modal-actions__qLNQh",y="PlaceItem_map-container__x9OeO";var w=function(e){var t=(0,s.useState)(!1),n=(0,a.Z)(t,2),o=n[0],u=n[1],d=(0,s.useState)(!1),h=(0,a.Z)(d,2),p=h[0],w=h[1],L=(0,Z.x)(),D=L.error,b=L.isLoading,M=L.sendRequest,O=L.clearError,S=(0,s.useContext)(_.V);function T(){u((function(){return!1}))}function F(){w((function(){return!1}))}function V(){return(V=(0,r.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(){return!1})),t.prev=1,t.next=4,M({url:"".concat("http://localhost:8080/api","/places/").concat(e.id),method:"DELETE",headers:{Authorization:"Bearer "+S.token}});case 4:e.onDelete(e.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j.Z,{error:D,onClear:O}),(0,f.jsx)(m.Z,{show:o,onCancel:T,header:e.address,footer:(0,f.jsx)(l.Z,{onClick:T,children:"CLOSE"}),contentClass:"".concat(E),footerClass:"".concat(P),children:(0,f.jsx)("div",{className:"".concat(y),children:(0,f.jsx)(x,{title:e.title,center:e.coordinates,zoom:15})})}),S.userId===e.creatorId&&(0,f.jsx)(m.Z,{show:p,onCancel:F,header:"Are you sure?",footerClass:"".concat(P),footer:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{inverse:!0,onClick:F,children:"CANCEL"}),(0,f.jsx)(l.Z,{danger:!0,onClick:function(){return V.apply(this,arguments)},children:"DELETE"})]}),children:(0,f.jsx)("p",{children:"Do you want to proceed and delete this place? Please note that it can't be undone thereafter."})}),(0,f.jsx)("li",{className:"".concat(g),children:(0,f.jsxs)(i.Z,{className:"".concat(N),children:[b&&(0,f.jsx)(v.Z,{asOverlay:!0}),(0,f.jsx)("div",{className:"".concat(C),children:(0,f.jsx)("img",{src:"".concat("http://localhost:8080","/").concat(e.image),alt:e.title})}),(0,f.jsxs)("div",{className:"".concat(I),children:[(0,f.jsx)("h2",{children:e.title}),(0,f.jsx)("h3",{children:e.address}),(0,f.jsx)("p",{children:e.description})]}),(0,f.jsxs)("div",{className:"".concat(k),children:[(0,f.jsx)(l.Z,{inverse:!0,onClick:function(){u((function(){return!0}))},children:"VIEW ON MAP"}),S.userId===e.creatorId&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{to:"/places/".concat(e.id),children:"EDIT"}),(0,f.jsx)(l.Z,{danger:!0,onClick:function(){w((function(){return!0}))},children:"DELETE"})]})]})]})})]})},L="PlaceList_place-list__+iZzH";var D=function(e){var t=(0,s.useContext)(_.V),n=(0,o.UO)().userId;return 0===e.places.length?(0,f.jsx)("div",{className:"".concat(L," center"),children:t.isLoggedIn&&t.userId===n?(0,f.jsxs)(i.Z,{children:[(0,f.jsx)("h2",{children:"No places found. Maybe create one?"}),(0,f.jsx)(l.Z,{to:"/places/new",children:"Share Place"})]}):(0,f.jsx)(i.Z,{children:(0,f.jsx)("h2",{children:"No places found."})})}):(0,f.jsx)("ul",{className:"".concat(L),children:e.places.map((function(t){return(0,f.jsx)(w,{id:t.id,title:t.title,image:t.image,address:t.address,creatorId:t.creator,coordinates:t.location,description:t.description,onDelete:e.onDeletePlace},t.id)}))})};var b=function(){var e=(0,o.UO)().userId,t=(0,Z.x)(),n=t.error,i=t.isLoading,l=t.sendRequest,u=t.clearError,d=(0,s.useState)([]),h=(0,a.Z)(d,2),p=h[0],x=h[1];return(0,s.useEffect)((function(){function t(){return(t=(0,r.Z)((0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l({url:"".concat("http://localhost:8080/api","/places//user/").concat(e)});case 3:n=t.sent,x((function(){return n.places})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),"Could not find a places for the provided user id."===t.t0.message?x((function(){return[]})):x((function(){})),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,l]),(0,f.jsxs)(f.Fragment,{children:[!p&&(0,f.jsx)(j.Z,{error:n,onClear:u}),i&&(0,f.jsx)("div",{className:"center",children:(0,f.jsx)(v.Z,{asOverlay:!0})}),!i&&p&&(0,f.jsx)(D,{places:p,onDeletePlace:function(e){x((function(t){return null===t||void 0===t?void 0:t.filter((function(t){return t.id!==e}))}))}})]})}},8042:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var c="Card_card__1-V8Z",r=n(184);var a=function(e){return(0,r.jsx)("div",{className:"".concat(c," ").concat(e.className),style:e.style,children:e.children})}}}]);
//# sourceMappingURL=741.47698ff6.chunk.js.map