"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[800],{3301:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(9439),a=i(1413),r=i(2791),l=i(9106),s="ImageUpload_form-control__S+NdZ",u="ImageUpload_image-upload__CzPQI",o="ImageUpload_center__jXDTo",c="ImageUpload_image-upload__preview__+ww3b",d=i(184);function p(e,t){switch(t.type){case"INPUT_CHANGE":return(0,a.Z)((0,a.Z)({},e),{},{file:t.file||e.file,isValid:t.isValid||e.isValid});case"PREVIEW_FILE":return(0,a.Z)((0,a.Z)({},e),{},{filePreviewUrl:t.filePreviewUrl||e.filePreviewUrl});default:return e}}var v=function(e){var t=(0,r.useReducer)(p,{file:void 0,filePreviewUrl:null,isValid:!1}),i=(0,n.Z)(t,2),a=i[0],v=i[1],f=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(a.file){var e=new FileReader;e.onload=function(){v({type:"PREVIEW_FILE",filePreviewUrl:e.result})},e.readAsDataURL(a.file)}}),[a.file]),(0,d.jsxs)("div",{className:"".concat(s),children:[(0,d.jsx)("input",{id:e.id,ref:f,style:{display:"none"},type:"file",accept:".png, .jpg, .jpeg",onChange:function(t){var i,n=a.isValid;t.target.files&&1===t.target.files.length?(i=t.target.files[0],v({type:"INPUT_CHANGE",file:i,isValid:!0}),n=!0):(v({type:"INPUT_CHANGE",file:void 0,isValid:!1}),n=!1),e.onInput(e.id,i,n)}}),(0,d.jsxs)("div",{className:"".concat(u," ").concat(e.center?o:""),children:[(0,d.jsxs)("div",{className:"".concat(c),children:[a.filePreviewUrl&&(0,d.jsx)("img",{src:a.filePreviewUrl.toString(),alt:"Preview"}),!a.filePreviewUrl&&(0,d.jsx)("p",{children:"Please pick an image."})]}),(0,d.jsx)(l.Z,{type:"button",onClick:function(){var e;null===(e=f.current)||void 0===e||e.click()},children:"PICK IMAGE"}),!a.isValid&&(0,d.jsx)("p",{children:e.errorText})]})]})}},2461:function(e,t,i){i.d(t,{Z:function(){return d}});var n=i(9439),a=i(1413),r=i(2791),l=i(343),s="Input_form-control__4leYh",u="Input_form-control--invalid__JOT1a",o=i(184);function c(e,t){switch(t.type){case"CHANGE":return(0,a.Z)((0,a.Z)({},e),{},{step:t.step||e.step,value:t.value||"",isValid:(0,l.ZP)(t.value||"",t.validators)});case"TOUCH":return(0,a.Z)((0,a.Z)({},e),{},{isTouched:!0});default:return e}}var d=function(e){var t,i=(0,r.useReducer)(c,{step:1,value:(null===(t=e.initialValue)||void 0===t?void 0:t.toString())||"",isValid:e.initialValid||!1,isTouched:!1}),a=(0,n.Z)(i,2),l=a[0],d=a[1],p=e.id,v=e.onInput,f=l.value,m=l.isValid;function h(t){if("number"===t.target.type){var i=1;if(Number.isInteger(parseFloat(t.target.value)))i=1;else if(0!==t.target.value.trim().length){var n=(t.target.value.split(".")[1]||"").length;i=parseFloat("0.".concat("0".repeat(n-1),"1"))}d({type:"CHANGE",step:i,value:t.target.value,validators:e.validators})}else d({type:"CHANGE",value:t.target.value,validators:e.validators})}function g(){d({type:"TOUCH"})}(0,r.useEffect)((function(){v&&v(p,f,m)}),[p,f,m,v]);var I="textarea"===e.type?(0,o.jsx)("textarea",{id:e.id,rows:e.rows||3,placeholder:e.placeholder,onChange:h,onBlur:g,value:l.value}):(0,o.jsx)("input",{id:e.id,type:e.type,min:e.min,max:e.max,step:"number"===e.type?l.step:void 0,placeholder:e.placeholder,onChange:h,onBlur:g,value:l.value});return(0,o.jsxs)("div",{className:"".concat(s," ").concat(!l.isValid&&l.isTouched?u:""),children:[(0,o.jsx)("label",{htmlFor:e.id,children:e.label}),I,!l.isValid&&l.isTouched&&(0,o.jsx)("p",{children:e.errorText})]})}},8042:function(e,t,i){i.d(t,{Z:function(){return r}});i(2791);var n="Card_card__1-V8Z",a=i(184);var r=function(e){return(0,a.jsx)("div",{className:"".concat(n," ").concat(e.className),style:e.style,children:e.children})}},6776:function(e,t,i){i.d(t,{c:function(){return u}});var n=i(9439),a=i(4942),r=i(1413),l=i(2791);function s(e,t){switch(t.type){case"INPUT_CHANGE":var i,n=!0;for(var l in e.inputs)e.inputs[l]&&(n=l===t.inputId?n&&t.isValid:n&&e.inputs[l].isValid);if(t.inputId)return(0,r.Z)((0,r.Z)({},e),{},{inputs:(0,r.Z)((0,r.Z)({},e.inputs),{},(0,a.Z)({},t.inputId,{value:null!==(i=t.value)&&void 0!==i?i:e.inputs[t.inputId].value,isValid:t.isValid})),isValid:n});break;case"SET_DATA":return{inputs:t.inputs||e.inputs,isValid:t.isValid||e.isValid};default:return e}return(0,r.Z)({},e)}function u(e,t){var i=(0,l.useReducer)(s,{inputs:e,isValid:t||!1}),a=(0,n.Z)(i,2),r=a[0],u=a[1];return[r,(0,l.useCallback)((function(e,t,i){u({type:"INPUT_CHANGE",inputId:e,value:t,isValid:i})}),[]),(0,l.useCallback)((function(e,t){u({type:"SET_DATA",inputs:e,isValid:t})}),[])]}},343:function(e,t,i){i.d(t,{Ox:function(){return c},Ss:function(){return s},TS:function(){return o},ZP:function(){return d},hg:function(){return r},p0:function(){return l},qE:function(){return u}});var n=i(7762),a=function(e){return e.REQUIRE="REQUIRE",e.NUMBER="NUMBER",e.MIN_LENGTH="MIN_LENGTH",e.MAX_LENGTH="MAX_lENGTH",e.MIN="MIN",e.MAX="MAX",e.EMAIL="EMAIL",e.FILE="FILE",e}({}),r=function(){return{type:a.REQUIRE,value:""}},l=function(){return{type:a.NUMBER,value:""}},s=function(e){return{type:a.MIN_LENGTH,value:e.toString()}},u=function(e){return{type:a.MIN,value:e.toString()}},o=function(e){return{type:a.MAX,value:e.toString()}},c=function(){return{type:a.EMAIL,value:""}};function d(e,t){var i=!0;if(t){var r,l=(0,n.Z)(t);try{for(l.s();!(r=l.n()).done;){var s=r.value;s.type===a.REQUIRE&&(i=i&&e.trim().length>0),s.type===a.NUMBER&&(i=i&&"number"===typeof+e.trim()),s.type===a.MIN_LENGTH&&(i=i&&e.trim().length>=+s.value),s.type===a.MAX_LENGTH&&(i=i&&e.trim().length<=+s.value),s.type===a.MIN&&(i=i&&+e>=+s.value),s.type===a.MAX&&(i=i&&+e<=+s.value),s.type===a.EMAIL&&(i=i&&/^\S+@\S+\.\S+$/.test(e))}}catch(u){l.e(u)}finally{l.f()}}return i}},800:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var n=i(4165),a=i(5861),r=i(1413),l=i(9439),s=i(2791),u=i(8042),o=i(2461),c=i(3301),d=i(9106),p=i(7009),v=i(8898),f=i(6776),m=i(509),h=i(343),g=i(8249),I="Auth_authentication__9Qqdi",x=i(184);var y=function(){var e,t,i=(0,s.useState)(!0),y=(0,l.Z)(i,2),E=y[0],N=y[1],Z=(0,m.x)(),_=Z.error,V=Z.isLoading,T=Z.sendRequest,w=Z.clearError,j=(0,s.useContext)(g.V),P=(0,f.c)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),U=(0,l.Z)(P,3),A=U[0],C=U[1],b=U[2];function M(){return(M=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!E){e.next=15;break}return e.prev=2,e.next=5,T({url:"".concat("http://localhost:8080/api","/users/login"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:A.inputs.email.value,password:A.inputs.password.value})});case 5:i=e.sent,console.log(i),j.login(i.userId,i.token,void 0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:e.next=31;break;case 15:return e.prev=15,(a=new FormData).append("name",A.inputs.name.value),a.append("email",A.inputs.email.value),a.append("password",A.inputs.password.value),a.append("image",A.inputs.image.value),e.next=23,T({url:"".concat("http://localhost:8080/api","/users/signup"),method:"POST",body:a});case 23:r=e.sent,console.log(r),j.login(r.userId,r.token,void 0),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(15),console.log(e.t1);case 31:case"end":return e.stop()}}),e,null,[[2,10],[15,28]])})))).apply(this,arguments)}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.Z,{error:_,onClear:w}),(0,x.jsxs)(u.Z,{className:"".concat(I),children:[V&&(0,x.jsx)(v.Z,{asOverlay:!0}),(0,x.jsx)("h2",{children:"Login Required"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("form",{onSubmit:function(e){return M.apply(this,arguments)},children:[!E&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.Z,{id:"image",center:!0,onInput:C,errorText:"Please provide an image"}),(0,x.jsx)(o.Z,{type:"text",id:"name",label:"Your Name",placeholder:"Your Name",onInput:C,errorText:"Please enter a name.",validators:[(0,h.hg)()]})]}),(0,x.jsx)(o.Z,{type:"email",id:"email",label:"E-mail",placeholder:"E-mail",initialValue:null===(e=A.inputs.email.value)||void 0===e?void 0:e.toString(),onInput:C,errorText:"Please enter a valid e-mail address.",validators:[(0,h.Ox)()]}),(0,x.jsx)(o.Z,{type:"password",id:"password",label:"Password",initialValue:null===(t=A.inputs.password.value)||void 0===t?void 0:t.toString(),onInput:C,placeholder:"Password",errorText:"Please enter a valid password, at least 8 characters.",validators:[(0,h.Ss)(8)]}),(0,x.jsx)(d.Z,{type:"submit",disabled:!A.isValid,children:E?"LOGIN":"SIGN UP"})]}),(0,x.jsxs)(d.Z,{inverse:!0,onClick:function(){E?b((0,r.Z)((0,r.Z)({},A.inputs),{},{image:{value:null,isValid:!1},name:{value:"",isValid:!1}}),!1):(delete A.inputs.image,delete A.inputs.name,b((0,r.Z)({},A.inputs),A.inputs.email.isValid&&A.inputs.password.isValid)),N((function(e){return!e}))},children:["SWITCH TO ",E?"SIGN UP":"LOGIN"]})]})]})}}}]);
//# sourceMappingURL=800.5c9aab5e.chunk.js.map