"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[388],{8388:function(e,t,n){n.r(t);var i=n(4165),r=n(5861),a=n(9439),l=n(2791),u=n(7689),s=n(8042),c=n(2461),o=n(9106),p=n(7009),d=n(8898),v=n(343),f=n(8249),h=n(6776),y=n(509),E=n(1140),m=n(184);t.default=function(){var e,t,n=(0,u.s0)(),x=(0,u.UO)().placeId,N=(0,l.useContext)(f.V),Z=(0,l.useState)(),I=(0,a.Z)(Z,2),V=I[0],T=I[1],g=(0,y.x)(),A=g.error,M=g.isLoading,_=g.sendRequest,j=g.clearError,C=(0,h.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1),b=(0,a.Z)(C,3),S=b[0],H=b[1],R=b[2];function L(){return(L=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,_({url:"".concat("https://share-place-mern-project-server.onrender.com/api","/places/").concat(x),method:"PATCH",headers:{Authorization:"Bearer "+N.token,"Content-Type":"application/json"},body:JSON.stringify({title:S.inputs.title.value,description:S.inputs.description.value})});case 4:n("/".concat(N.userId,"/places")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return(0,l.useEffect)((function(){function e(){return(e=(0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_({url:"".concat("https://share-place-mern-project-server.onrender.com/api","/places/").concat(x)});case 3:(t=e.sent).place&&(T((function(){return t.place})),R({title:{value:t.place.title,isValid:!0},description:{value:t.place.description,isValid:!0}},!0)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x,_,R]),V||A?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(p.Z,{error:A,onClear:j}),M&&(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(d.Z,{asOverlay:!0})}),!M&&V&&(0,m.jsxs)("form",{className:"".concat(E.Z["place-form"]),onSubmit:function(e){return L.apply(this,arguments)},children:[(0,m.jsx)(c.Z,{id:"title",type:"text",label:"Title",onInput:H,initialValid:S.inputs.title.isValid,initialValue:null===(e=S.inputs.title.value)||void 0===e?void 0:e.toString(),validators:[(0,v.hg)()],errorText:"Please enter a valid title."}),(0,m.jsx)(c.Z,{id:"description",type:"textarea",label:"Description",onInput:H,initialValid:S.inputs.description.isValid,initialValue:null===(t=S.inputs.description.value)||void 0===t?void 0:t.toString(),validators:[(0,v.Ss)(5)],errorText:"Please enter a valid description (at least 5 characters)."}),(0,m.jsx)(o.Z,{type:"submit",disabled:!S.isValid,children:"UPDATE PLACE"})]})]}):(0,m.jsx)("div",{className:"center",children:(0,m.jsx)(s.Z,{children:(0,m.jsx)("h2",{children:"Could not find place!"})})})}},2461:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(9439),r=n(1413),a=n(2791),l=n(343),u="Input_form-control__4leYh",s="Input_form-control--invalid__JOT1a",c=n(184);function o(e,t){switch(t.type){case"CHANGE":return(0,r.Z)((0,r.Z)({},e),{},{step:t.step||e.step,value:t.value||"",isValid:(0,l.ZP)(t.value||"",t.validators)});case"TOUCH":return(0,r.Z)((0,r.Z)({},e),{},{isTouched:!0});default:return e}}var p=function(e){var t,n=(0,a.useReducer)(o,{step:1,value:(null===(t=e.initialValue)||void 0===t?void 0:t.toString())||"",isValid:e.initialValid||!1,isTouched:!1}),r=(0,i.Z)(n,2),l=r[0],p=r[1],d=e.id,v=e.onInput,f=l.value,h=l.isValid;function y(t){if("number"===t.target.type){var n=1;if(Number.isInteger(parseFloat(t.target.value)))n=1;else if(0!==t.target.value.trim().length){var i=(t.target.value.split(".")[1]||"").length;n=parseFloat("0.".concat("0".repeat(i-1),"1"))}p({type:"CHANGE",step:n,value:t.target.value,validators:e.validators})}else p({type:"CHANGE",value:t.target.value,validators:e.validators})}function E(){p({type:"TOUCH"})}(0,a.useEffect)((function(){v&&v(d,f,h)}),[d,f,h,v]);var m="textarea"===e.type?(0,c.jsx)("textarea",{id:e.id,rows:e.rows||3,placeholder:e.placeholder,onChange:y,onBlur:E,value:l.value}):(0,c.jsx)("input",{id:e.id,type:e.type,min:e.min,max:e.max,step:"number"===e.type?l.step:void 0,placeholder:e.placeholder,onChange:y,onBlur:E,value:l.value});return(0,c.jsxs)("div",{className:"".concat(u," ").concat(!l.isValid&&l.isTouched?s:""),children:[(0,c.jsx)("label",{htmlFor:e.id,children:e.label}),m,!l.isValid&&l.isTouched&&(0,c.jsx)("p",{children:e.errorText})]})}},8042:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var i="Card_card__1-V8Z",r=n(184);var a=function(e){return(0,r.jsx)("div",{className:"".concat(i," ").concat(e.className),style:e.style,children:e.children})}},6776:function(e,t,n){n.d(t,{c:function(){return s}});var i=n(9439),r=n(4942),a=n(1413),l=n(2791);function u(e,t){switch(t.type){case"INPUT_CHANGE":var n,i=!0;for(var l in e.inputs)e.inputs[l]&&(i=l===t.inputId?i&&t.isValid:i&&e.inputs[l].isValid);if(t.inputId)return(0,a.Z)((0,a.Z)({},e),{},{inputs:(0,a.Z)((0,a.Z)({},e.inputs),{},(0,r.Z)({},t.inputId,{value:null!==(n=t.value)&&void 0!==n?n:e.inputs[t.inputId].value,isValid:t.isValid})),isValid:i});break;case"SET_DATA":return{inputs:t.inputs||e.inputs,isValid:t.isValid||e.isValid};default:return e}return(0,a.Z)({},e)}function s(e,t){var n=(0,l.useReducer)(u,{inputs:e,isValid:t||!1}),r=(0,i.Z)(n,2),a=r[0],s=r[1];return[a,(0,l.useCallback)((function(e,t,n){s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:n})}),[]),(0,l.useCallback)((function(e,t){s({type:"SET_DATA",inputs:e,isValid:t})}),[])]}},343:function(e,t,n){n.d(t,{Ox:function(){return o},Ss:function(){return u},TS:function(){return c},ZP:function(){return p},hg:function(){return a},p0:function(){return l},qE:function(){return s}});var i=n(7762),r=function(e){return e.REQUIRE="REQUIRE",e.NUMBER="NUMBER",e.MIN_LENGTH="MIN_LENGTH",e.MAX_LENGTH="MAX_lENGTH",e.MIN="MIN",e.MAX="MAX",e.EMAIL="EMAIL",e.FILE="FILE",e}({}),a=function(){return{type:r.REQUIRE,value:""}},l=function(){return{type:r.NUMBER,value:""}},u=function(e){return{type:r.MIN_LENGTH,value:e.toString()}},s=function(e){return{type:r.MIN,value:e.toString()}},c=function(e){return{type:r.MAX,value:e.toString()}},o=function(){return{type:r.EMAIL,value:""}};function p(e,t){var n=!0;if(t){var a,l=(0,i.Z)(t);try{for(l.s();!(a=l.n()).done;){var u=a.value;u.type===r.REQUIRE&&(n=n&&e.trim().length>0),u.type===r.NUMBER&&(n=n&&"number"===typeof+e.trim()),u.type===r.MIN_LENGTH&&(n=n&&e.trim().length>=+u.value),u.type===r.MAX_LENGTH&&(n=n&&e.trim().length<=+u.value),u.type===r.MIN&&(n=n&&+e>=+u.value),u.type===r.MAX&&(n=n&&+e<=+u.value),u.type===r.EMAIL&&(n=n&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){l.e(s)}finally{l.f()}}return n}},1140:function(e,t){t.Z={"place-form":"PlaceForm_place-form__PS6qS"}}}]);
//# sourceMappingURL=388.36d5f6fa.chunk.js.map