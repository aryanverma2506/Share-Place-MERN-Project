"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[388],{388:(e,t,i)=>{i.r(t),i.d(t,{default:()=>y});var a=i(791),l=i(689),n=i(42),s=i(461),r=i(106),c=i(9),o=i(898),u=i(343),d=i(249),p=i(776),v=i(509),h=i(140),f=i(184);const y=function(){var e,t;const i=(0,l.s0)(),y=(0,l.UO)().placeId,E=(0,a.useContext)(d.V),[N,I]=(0,a.useState)(),{error:m,isLoading:V,sendRequest:x,clearError:T}=(0,v.x)(),[g,A,M]=(0,p.c)({title:{value:"",isValid:!1},description:{value:"",isValid:!1}},!1);return(0,a.useEffect)((()=>{!async function(){try{const e=await x({url:"".concat("http://localhost:3000/api","/places/").concat(y)});e.place&&(I((()=>e.place)),M({title:{value:e.place.title,isValid:!0},description:{value:e.place.description,isValid:!0}},!0))}catch(m){console.log(m)}}()}),[y,x,M]),N||m?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{error:m,onClear:T}),V&&(0,f.jsx)("div",{className:"center",children:(0,f.jsx)(o.Z,{asOverlay:!0})}),!V&&N&&(0,f.jsxs)("form",{className:"".concat(h.Z["place-form"]),onSubmit:async function(e){e.preventDefault();try{await x({url:"".concat("http://localhost:3000/api","/places/").concat(y),method:"PATCH",headers:{Authorization:"Bearer "+E.token,"Content-Type":"application/json"},body:JSON.stringify({title:g.inputs.title.value,description:g.inputs.description.value})}),i("/".concat(E.userId,"/places"))}catch(m){console.log(m)}},children:[(0,f.jsx)(s.Z,{id:"title",type:"text",label:"Title",onInput:A,initialValid:g.inputs.title.isValid,initialValue:null===(e=g.inputs.title.value)||void 0===e?void 0:e.toString(),validators:[(0,u.hg)()],errorText:"Please enter a valid title."}),(0,f.jsx)(s.Z,{id:"description",type:"textarea",label:"Description",onInput:A,initialValid:g.inputs.description.isValid,initialValue:null===(t=g.inputs.description.value)||void 0===t?void 0:t.toString(),validators:[(0,u.Ss)(5)],errorText:"Please enter a valid description (at least 5 characters)."}),(0,f.jsx)(r.Z,{type:"submit",disabled:!g.isValid,children:"UPDATE PLACE"})]})]}):(0,f.jsx)("div",{className:"center",children:(0,f.jsx)(n.Z,{children:(0,f.jsx)("h2",{children:"Could not find place!"})})})}},461:(e,t,i)=>{i.d(t,{Z:()=>o});var a=i(791),l=i(343);const n="Input_form-control__4leYh",s="Input_form-control--invalid__JOT1a";var r=i(184);function c(e,t){switch(t.type){case"CHANGE":return{...e,step:t.step||e.step,value:t.value||"",isValid:(0,l.ZP)(t.value||"",t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}}const o=function(e){var t;const[i,l]=(0,a.useReducer)(c,{step:1,value:(null===(t=e.initialValue)||void 0===t?void 0:t.toString())||"",isValid:e.initialValid||!1,isTouched:!1}),{id:o,onInput:u}=e,{value:d,isValid:p}=i;function v(t){if("number"===t.target.type){let i=1;if(Number.isInteger(parseFloat(t.target.value)))i=1;else if(0!==t.target.value.trim().length){const e=(t.target.value.split(".")[1]||"").length;i=parseFloat("0.".concat("0".repeat(e-1),"1"))}l({type:"CHANGE",step:i,value:t.target.value,validators:e.validators})}else l({type:"CHANGE",value:t.target.value,validators:e.validators})}function h(){l({type:"TOUCH"})}(0,a.useEffect)((()=>{u&&u(o,d,p)}),[o,d,p,u]);const f="textarea"===e.type?(0,r.jsx)("textarea",{id:e.id,rows:e.rows||3,placeholder:e.placeholder,onChange:v,onBlur:h,value:i.value}):(0,r.jsx)("input",{id:e.id,type:e.type,min:e.min,max:e.max,step:"number"===e.type?i.step:void 0,placeholder:e.placeholder,onChange:v,onBlur:h,value:i.value});return(0,r.jsxs)("div",{className:"".concat(n," ").concat(!i.isValid&&i.isTouched?s:""),children:[(0,r.jsx)("label",{htmlFor:e.id,children:e.label}),f,!i.isValid&&i.isTouched&&(0,r.jsx)("p",{children:e.errorText})]})}},42:(e,t,i)=>{i.d(t,{Z:()=>n});i(791);const a="Card_card__1-V8Z";var l=i(184);const n=function(e){return(0,l.jsx)("div",{className:"".concat(a," ").concat(e.className),style:e.style,children:e.children})}},776:(e,t,i)=>{i.d(t,{c:()=>n});var a=i(791);function l(e,t){switch(t.type){case"INPUT_CHANGE":let a=!0;for(const i in e.inputs)e.inputs[i]&&(a=i===t.inputId?a&&t.isValid:a&&e.inputs[i].isValid);var i;if(t.inputId)return{...e,inputs:{...e.inputs,[t.inputId]:{value:null!==(i=t.value)&&void 0!==i?i:e.inputs[t.inputId].value,isValid:t.isValid}},isValid:a};break;case"SET_DATA":return{inputs:t.inputs||e.inputs,isValid:t.isValid||e.isValid};default:return e}return{...e}}function n(e,t){const[i,n]=(0,a.useReducer)(l,{inputs:e,isValid:t||!1});return[i,(0,a.useCallback)(((e,t,i)=>{n({type:"INPUT_CHANGE",inputId:e,value:t,isValid:i})}),[]),(0,a.useCallback)(((e,t)=>{n({type:"SET_DATA",inputs:e,isValid:t})}),[])]}},343:(e,t,i)=>{i.d(t,{Ox:()=>o,Ss:()=>s,TS:()=>c,ZP:()=>u,hg:()=>l,p0:()=>n,qE:()=>r});let a=function(e){return e.REQUIRE="REQUIRE",e.NUMBER="NUMBER",e.MIN_LENGTH="MIN_LENGTH",e.MAX_LENGTH="MAX_lENGTH",e.MIN="MIN",e.MAX="MAX",e.EMAIL="EMAIL",e.FILE="FILE",e}({});const l=()=>({type:a.REQUIRE,value:""}),n=()=>({type:a.NUMBER,value:""}),s=e=>({type:a.MIN_LENGTH,value:e.toString()}),r=e=>({type:a.MIN,value:e.toString()}),c=e=>({type:a.MAX,value:e.toString()}),o=()=>({type:a.EMAIL,value:""});function u(e,t){let i=!0;if(t)for(const l of t)l.type===a.REQUIRE&&(i=i&&e.trim().length>0),l.type===a.NUMBER&&(i=i&&"number"===typeof+e.trim()),l.type===a.MIN_LENGTH&&(i=i&&e.trim().length>=+l.value),l.type===a.MAX_LENGTH&&(i=i&&e.trim().length<=+l.value),l.type===a.MIN&&(i=i&&+e>=+l.value),l.type===a.MAX&&(i=i&&+e<=+l.value),l.type===a.EMAIL&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},140:(e,t,i)=>{i.d(t,{Z:()=>a});const a={"place-form":"PlaceForm_place-form__PS6qS"}}}]);
//# sourceMappingURL=388.759898c5.chunk.js.map