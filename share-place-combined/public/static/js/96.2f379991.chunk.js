"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[96],{96:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var a=i(791),l=i(689),n=i(461),r=i(301),s=i(106),u=i(9),d=i(898),o=i(343),p=i(776),c=i(509),v=i(249),f=i(140),g=i(184);const m=function(){const e=(0,a.useContext)(v.V),t=(0,l.s0)(),{error:i,isLoading:m,sendRequest:h,clearError:I}=(0,c.x)(),[E,x]=(0,p.c)({image:{value:null,isValid:!1},title:{value:"",isValid:!1},description:{value:"",isValid:!1},address:{value:"",isValid:!1},latitude:{value:"",isValid:!1},longitude:{value:"",isValid:!1}},!1);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(u.Z,{error:i,onClear:I}),(0,g.jsxs)("form",{className:"".concat(f.Z["place-form"]),onSubmit:async function(a){a.preventDefault();try{const i=new FormData;i.append("image",E.inputs.image.value),i.append("title",E.inputs.title.value),i.append("address",E.inputs.address.value),i.append("description",E.inputs.description.value),i.append("latitude",E.inputs.latitude.value),i.append("longitude",E.inputs.longitude.value),await h({url:"".concat("http://localhost:3000/api","/places/"),method:"POST",headers:{Authorization:"Bearer "+e.token},body:i}),t("/")}catch(i){console.log(i)}},children:[m&&(0,g.jsx)(d.Z,{asOverlay:!0}),(0,g.jsx)(r.Z,{id:"image",center:!0,onInput:x,errorText:"Please provide an image"}),(0,g.jsx)(n.Z,{id:"title",label:"Title",type:"text",onInput:x,validators:[(0,o.hg)()],errorText:"Please enter a valid title."}),(0,g.jsx)(n.Z,{id:"address",label:"Address",type:"textarea",onInput:x,validators:[(0,o.Ss)(5)],errorText:"Please enter a valid address."}),(0,g.jsx)(n.Z,{id:"description",label:"Description",type:"textarea",onInput:x,validators:[(0,o.Ss)(5)],errorText:"Please enter a valid description (at least 5 characters)."}),(0,g.jsx)(n.Z,{id:"latitude",label:"Latitude",type:"number",min:-91,max:90,onInput:x,validators:[(0,o.hg)(),(0,o.p0)(),(0,o.qE)(-91),(0,o.TS)(90)],errorText:"Latitude should be between -90 to 90 degrees."}),(0,g.jsx)(n.Z,{id:"longitude",label:"Longitude",type:"number",min:-181,max:180,onInput:x,validators:[(0,o.hg)(),(0,o.p0)(),(0,o.qE)(-181),(0,o.TS)(180)],errorText:"Longitude should be between -180 to 180 degrees."}),(0,g.jsx)(s.Z,{type:"submit",disabled:!E.isValid,children:"ADD PLACE"})]})]})}},301:(e,t,i)=>{i.d(t,{Z:()=>p});var a=i(791),l=i(106);const n="ImageUpload_form-control__S+NdZ",r="ImageUpload_image-upload__CzPQI",s="ImageUpload_center__jXDTo",u="ImageUpload_image-upload__preview__+ww3b";var d=i(184);function o(e,t){switch(t.type){case"INPUT_CHANGE":return{...e,file:t.file||e.file,isValid:t.isValid||e.isValid};case"PREVIEW_FILE":return{...e,filePreviewUrl:t.filePreviewUrl||e.filePreviewUrl};default:return e}}const p=function(e){const[t,i]=(0,a.useReducer)(o,{file:void 0,filePreviewUrl:null,isValid:!1}),p=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(t.file){const e=new FileReader;e.onload=()=>{i({type:"PREVIEW_FILE",filePreviewUrl:e.result})},e.readAsDataURL(t.file)}}),[t.file]),(0,d.jsxs)("div",{className:"".concat(n),children:[(0,d.jsx)("input",{id:e.id,ref:p,style:{display:"none"},type:"file",accept:".png, .jpg, .jpeg",onChange:function(a){let l,n=t.isValid;a.target.files&&1===a.target.files.length?(l=a.target.files[0],i({type:"INPUT_CHANGE",file:l,isValid:!0}),n=!0):(i({type:"INPUT_CHANGE",file:void 0,isValid:!1}),n=!1),e.onInput(e.id,l,n)}}),(0,d.jsxs)("div",{className:"".concat(r," ").concat(e.center?s:""),children:[(0,d.jsxs)("div",{className:"".concat(u),children:[t.filePreviewUrl&&(0,d.jsx)("img",{src:t.filePreviewUrl.toString(),alt:"Preview"}),!t.filePreviewUrl&&(0,d.jsx)("p",{children:"Please pick an image."})]}),(0,d.jsx)(l.Z,{type:"button",onClick:function(){var e;null===(e=p.current)||void 0===e||e.click()},children:"PICK IMAGE"}),!t.isValid&&(0,d.jsx)("p",{children:e.errorText})]})]})}},461:(e,t,i)=>{i.d(t,{Z:()=>d});var a=i(791),l=i(343);const n="Input_form-control__4leYh",r="Input_form-control--invalid__JOT1a";var s=i(184);function u(e,t){switch(t.type){case"CHANGE":return{...e,step:t.step||e.step,value:t.value||"",isValid:(0,l.ZP)(t.value||"",t.validators)};case"TOUCH":return{...e,isTouched:!0};default:return e}}const d=function(e){var t;const[i,l]=(0,a.useReducer)(u,{step:1,value:(null===(t=e.initialValue)||void 0===t?void 0:t.toString())||"",isValid:e.initialValid||!1,isTouched:!1}),{id:d,onInput:o}=e,{value:p,isValid:c}=i;function v(t){if("number"===t.target.type){let i=1;if(Number.isInteger(parseFloat(t.target.value)))i=1;else if(0!==t.target.value.trim().length){const e=(t.target.value.split(".")[1]||"").length;i=parseFloat("0.".concat("0".repeat(e-1),"1"))}l({type:"CHANGE",step:i,value:t.target.value,validators:e.validators})}else l({type:"CHANGE",value:t.target.value,validators:e.validators})}function f(){l({type:"TOUCH"})}(0,a.useEffect)((()=>{o&&o(d,p,c)}),[d,p,c,o]);const g="textarea"===e.type?(0,s.jsx)("textarea",{id:e.id,rows:e.rows||3,placeholder:e.placeholder,onChange:v,onBlur:f,value:i.value}):(0,s.jsx)("input",{id:e.id,type:e.type,min:e.min,max:e.max,step:"number"===e.type?i.step:void 0,placeholder:e.placeholder,onChange:v,onBlur:f,value:i.value});return(0,s.jsxs)("div",{className:"".concat(n," ").concat(!i.isValid&&i.isTouched?r:""),children:[(0,s.jsx)("label",{htmlFor:e.id,children:e.label}),g,!i.isValid&&i.isTouched&&(0,s.jsx)("p",{children:e.errorText})]})}},776:(e,t,i)=>{i.d(t,{c:()=>n});var a=i(791);function l(e,t){switch(t.type){case"INPUT_CHANGE":let a=!0;for(const i in e.inputs)e.inputs[i]&&(a=i===t.inputId?a&&t.isValid:a&&e.inputs[i].isValid);var i;if(t.inputId)return{...e,inputs:{...e.inputs,[t.inputId]:{value:null!==(i=t.value)&&void 0!==i?i:e.inputs[t.inputId].value,isValid:t.isValid}},isValid:a};break;case"SET_DATA":return{inputs:t.inputs||e.inputs,isValid:t.isValid||e.isValid};default:return e}return{...e}}function n(e,t){const[i,n]=(0,a.useReducer)(l,{inputs:e,isValid:t||!1});return[i,(0,a.useCallback)(((e,t,i)=>{n({type:"INPUT_CHANGE",inputId:e,value:t,isValid:i})}),[]),(0,a.useCallback)(((e,t)=>{n({type:"SET_DATA",inputs:e,isValid:t})}),[])]}},343:(e,t,i)=>{i.d(t,{Ox:()=>d,Ss:()=>r,TS:()=>u,ZP:()=>o,hg:()=>l,p0:()=>n,qE:()=>s});let a=function(e){return e.REQUIRE="REQUIRE",e.NUMBER="NUMBER",e.MIN_LENGTH="MIN_LENGTH",e.MAX_LENGTH="MAX_lENGTH",e.MIN="MIN",e.MAX="MAX",e.EMAIL="EMAIL",e.FILE="FILE",e}({});const l=()=>({type:a.REQUIRE,value:""}),n=()=>({type:a.NUMBER,value:""}),r=e=>({type:a.MIN_LENGTH,value:e.toString()}),s=e=>({type:a.MIN,value:e.toString()}),u=e=>({type:a.MAX,value:e.toString()}),d=()=>({type:a.EMAIL,value:""});function o(e,t){let i=!0;if(t)for(const l of t)l.type===a.REQUIRE&&(i=i&&e.trim().length>0),l.type===a.NUMBER&&(i=i&&"number"===typeof+e.trim()),l.type===a.MIN_LENGTH&&(i=i&&e.trim().length>=+l.value),l.type===a.MAX_LENGTH&&(i=i&&e.trim().length<=+l.value),l.type===a.MIN&&(i=i&&+e>=+l.value),l.type===a.MAX&&(i=i&&+e<=+l.value),l.type===a.EMAIL&&(i=i&&/^\S+@\S+\.\S+$/.test(e));return i}},140:(e,t,i)=>{i.d(t,{Z:()=>a});const a={"place-form":"PlaceForm_place-form__PS6qS"}}}]);
//# sourceMappingURL=96.2f379991.chunk.js.map